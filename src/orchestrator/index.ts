import { Orchestrator } from './client'
import { PROD_ORCHESTRATOR_URL, RHINESTONE_SPOKE_POOL_ADDRESS } from './consts'
import {
  SafeOrchestrator,
  getSafeOrchestrator,
  categorizeError,
  ErrorCategory,
  type OrchestratorResult,
  type CategorizedError,
} from './safeClient'
import {
  AuthenticationRequiredError,
  BadRequestError,
  BodyParserError,
  ConflictError,
  ForbiddenError,
  InsufficientBalanceError,
  InsufficientLiquidityError,
  IntentNotFoundError,
  InternalServerError,
  InvalidApiKeyError,
  InvalidIntentSignatureError,
  isAuthError,
  isOrchestratorError,
  isRateLimited,
  isRetryable,
  isValidationError,
  NoPathFoundError,
  OnlyOneTargetTokenAmountCanBeUnsetError,
  OrchestratorError,
  RateLimitedError,
  ResourceNotFoundError,
  SchemaValidationError,
  ServiceUnavailableError,
  SimulationFailedError,
  TokenNotSupportedError,
  UnauthorizedError,
  UnprocessableEntityError,
  UnsupportedChainError,
  UnsupportedChainIdError,
  UnsupportedTokenError,
} from './error'
import {
  getAllSupportedChainsAndTokens,
  getSupportedTokens,
  getTokenAddress,
  getTokenDecimals,
  getTokenSymbol,
  getWethAddress,
  isTokenAddressSupported,
} from './registry'
import type {
  ApprovalRequired,
  AuxiliaryFunds,
  IntentInput,
  IntentOp,
  IntentOpStatus,
  IntentResult,
  IntentRoute,
  Portfolio,
  SettlementLayer,
  SignedIntentOp,
  SplitIntentsInput,
  SplitIntentsResult,
  SupportedChain,
  TokenConfig,
  TokenRequirements,
  WrapRequired,
} from './types'
import {
  INTENT_STATUS_CLAIMED,
  INTENT_STATUS_COMPLETED,
  INTENT_STATUS_EXPIRED,
  INTENT_STATUS_FAILED,
  INTENT_STATUS_FILLED,
  INTENT_STATUS_PENDING,
  INTENT_STATUS_PRECONFIRMED,
} from './types'

function getOrchestrator(
  apiKey?: string,
  orchestratorUrl?: string,
): Orchestrator {
  return new Orchestrator(orchestratorUrl ?? PROD_ORCHESTRATOR_URL, apiKey)
}

export type {
  AuxiliaryFunds,
  IntentInput,
  IntentOp,
  IntentOpStatus,
  IntentResult,
  IntentRoute,
  SettlementLayer,
  SignedIntentOp,
  SplitIntentsInput,
  SplitIntentsResult,
  SupportedChain,
  TokenConfig,
  Portfolio,
  TokenRequirements,
  WrapRequired,
  ApprovalRequired,
  OrchestratorResult,
  CategorizedError,
}
export {
  INTENT_STATUS_PENDING,
  INTENT_STATUS_EXPIRED,
  INTENT_STATUS_COMPLETED,
  INTENT_STATUS_FILLED,
  INTENT_STATUS_FAILED,
  INTENT_STATUS_PRECONFIRMED,
  INTENT_STATUS_CLAIMED,
  RHINESTONE_SPOKE_POOL_ADDRESS,
  Orchestrator,
  AuthenticationRequiredError,
  BadRequestError,
  BodyParserError,
  ConflictError,
  ForbiddenError,
  InsufficientBalanceError,
  InsufficientLiquidityError,
  InvalidApiKeyError,
  InvalidIntentSignatureError,
  NoPathFoundError,
  OnlyOneTargetTokenAmountCanBeUnsetError,
  OrchestratorError,
  IntentNotFoundError,
  InternalServerError,
  ResourceNotFoundError,
  RateLimitedError,
  SchemaValidationError,
  ServiceUnavailableError,
  SimulationFailedError,
  UnprocessableEntityError,
  UnauthorizedError,
  TokenNotSupportedError,
  UnsupportedChainError,
  UnsupportedChainIdError,
  UnsupportedTokenError,
  getOrchestrator,
  SafeOrchestrator,
  getSafeOrchestrator,
  categorizeError,
  ErrorCategory,
  getWethAddress,
  getTokenSymbol,
  getTokenAddress,
  getTokenDecimals,
  getSupportedTokens,
  getAllSupportedChainsAndTokens,
  isOrchestratorError,
  isRetryable,
  isAuthError,
  isValidationError,
  isRateLimited,
  isTokenAddressSupported,
}
